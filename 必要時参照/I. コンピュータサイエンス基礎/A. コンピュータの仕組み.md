# A. コンピュータの仕組み

## 概要

コンピュータの動作原理を理解することは、効率的なソフトウェア開発の基盤となります。CPU、メモリ、ストレージ、プロセス管理の4つの領域を押さえましょう。

---

## メモリ管理

物理メモリ（RAM）と仮想メモリの関係を理解することが重要です。仮想メモリにより、各プロセスは独立したアドレス空間を持ち、物理メモリより大きなメモリ空間を扱えます。

プログラム実行時、メモリはスタック（関数の呼び出し履歴やローカル変数）とヒープ（動的に確保されるデータ）に分かれます。スタックは自動管理されますが、ヒープは明示的な解放が必要な言語もあり、解放忘れがメモリリークの原因となります。

---

## ストレージとファイルシステム

HDDは回転するディスクで機械的にデータを読み書きし、SSDはフラッシュメモリで電子的にアクセスします。SSDはランダムアクセスが高速で、起動時間やアプリケーション応答性が向上します。

ファイルシステムはデータをディスク上に整理する仕組みで、I/O性能はアプリケーションのボトルネックになりやすい部分です。シーケンシャル読み書きとランダムアクセスでは性能特性が大きく異なります。

---

## プロセスとスレッド

プロセスは実行中のプログラムで、独立したメモリ空間を持ちます。スレッドはプロセス内の実行単位で、同一プロセス内でメモリを共有します。

OSのスケジューラがCPU時間を各プロセス/スレッドに割り当てます。コンテキストスイッチ（実行状態の切り替え）にはオーバーヘッドがあるため、過度なスレッド生成は逆効果になることがあります。システムコールはユーザープログラムからOSの機能を呼び出す仕組みです。

---

## CPU

CPUは命令のフェッチ→デコード→実行→結果書き戻しというサイクルで動作します。命令セットアーキテクチャ（ISA）がCPUが理解できる命令の仕様を定義します。

パイプライン処理により複数命令を並行処理し、キャッシュメモリ（L1/L2/L3）がメインメモリより高速なデータアクセスを提供します。キャッシュヒット率を意識したコード設計がパフォーマンス向上の鍵となります。

---

## 重要なポイント

1. 仮想メモリによりプロセスは独立したアドレス空間を持つ
2. スタックは自動管理、ヒープは手動管理が必要な場合がある
3. プロセスはメモリ分離、スレッドはメモリ共有
4. コンテキストスイッチにはコストがある
5. キャッシュメモリの活用がパフォーマンスに影響
