# C. ネットワーク基礎

## 概要

Webアプリケーション開発において、ネットワークの基礎知識は不可欠です。IPアドレス、プロトコル、HTTP通信、ルーティング、ネットワークモデルの理解が求められます。

---

## IPアドレスとサブネット

**IPv4**は32ビット（例：192.168.1.1）、**IPv6**は128ビット（例：2001:db8::1）のアドレス形式です。**サブネットマスク**はネットワーク部とホスト部を区別し、**CIDR表記**（例：192.168.1.0/24）でネットワーク範囲を表現します。

クラウド環境では**VPC**（仮想プライベートクラウド）内に**サブネット**を設計し、パブリック/プライベートサブネットでリソースを分離します。

---

## TCP/UDP・TLS

**TCP**は信頼性のある通信（再送制御、順序保証）を提供し、Webやメールで使用されます。**UDP**は軽量で低遅延ですが信頼性保証がなく、動画ストリーミングやDNSで使用されます。

**TLS/SSL**はHTTP上に暗号化層を追加し、**HTTPS**として安全な通信を実現します。証明書により通信相手の認証も行います。

---

## HTTP通信

HTTPはリクエスト/レスポンス型のプロトコルです。主要メソッド：GET（取得）、POST（作成）、PUT（更新）、DELETE（削除）。

**ステータスコード**は結果を示します：2xx成功、3xxリダイレクト、4xxクライアントエラー、5xxサーバーエラー。

**Cookie**はクライアント側にデータを保存し、**Session**はサーバー側で状態を管理します。**CORS**は異なるオリジン間のリソース共有を制御する仕組みで、APIサーバーで適切な設定が必要です。

```http
# HTTPリクエスト例
GET /api/users HTTP/1.1
Host: example.com
Authorization: Bearer token123
```

---

## DNS

**DNS**（Domain Name System）はドメイン名をIPアドレスに変換します。名前解決は再帰的クエリでルートサーバーから順に辿り、結果はキャッシュされます。`nslookup`や`dig`コマンドでDNS解決を確認できます。

---

## ルーティング

**ルーティング**はパケットの転送先を決定する仕組みです。**デフォルトゲートウェイ**は宛先が不明な場合の転送先で、**ルーティングテーブル**に経路情報が格納されます。

**NAT**（Network Address Translation）はプライベートIPをグローバルIPに変換し、**PAT**はポート番号も含めて変換します。`traceroute`コマンドで経路を確認できます。

---

## ネットワークモデル

**OSI参照モデル**は7層（物理→データリンク→ネットワーク→トランスポート→セッション→プレゼンテーション→アプリケーション）、**TCP/IPモデル**は4層（ネットワークインターフェース→インターネット→トランスポート→アプリケーション）で構成されます。

データは送信時に各層でヘッダが付加（カプセル化）され、受信時に除去（デカプセル化）されます。問題発生時は層ごとに切り分けて原因を特定します。

---

## 重要なポイント

1. IPv4/IPv6とCIDR表記を理解する
2. TCP（信頼性重視）とUDP（速度重視）を使い分ける
3. HTTPステータスコードの意味を把握する
4. CORS設定はAPI開発で必須
5. ネットワーク問題は層ごとに切り分けて調査する
