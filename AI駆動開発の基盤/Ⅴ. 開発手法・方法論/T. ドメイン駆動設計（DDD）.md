# ドメイン駆動設計（DDD）

## 概要

ドメイン駆動設計（Domain-Driven Design）は、ビジネスドメインの複雑性をコードに適切に反映させる設計思想です。開発チーム全体が**ユビキタス言語**（共通言語）を持つことで、ビジネス側と開発側の認識のずれを防ぎます。

## ユビキタス言語（Ubiquitous Language）

ビジネスドメインに関わるすべての人が共通で使う言語。この言語をコード内の用語・メソッド名に直接反映させることで、ビジネス要件と実装が一致します。

```java
// ビジネス用語がそのままコードになる
class Order {
  private CustomerId customerId;
  private List<OrderItem> items;
  private Payment payment;
  private OrderStatus status;

  public void completePayment() {
    this.status = OrderStatus.PAYMENT_COMPLETED;
  }
}
// ✓ メソッド名「completePayment」はビジネス側も開発側も理解できる
// ❌ 避けるべき：void process() { }（何をしているか曖昧）
```

## 境界づけられたコンテキスト（Bounded Context）

ドメイン全体を単一モデルで表現すると複雑性が増加するため、ドメインを意味のある単位に分割し、各領域で独立したモデルを持ちます。

```
例：Eコマースシステムの分割

注文コンテキスト      在庫コンテキスト      配送コンテキスト
（支払い管理）    →  （出荷指示）  →  （配送先管理）

各コンテキスト内で「Order」の意味が異なる：
- 注文C：支払いステータスが重要
- 在庫C：ピッキングステップが重要
- 配送C：配送先住所が重要

→ 「OrderCompletedEvent」でコンテキスト間を通信
```

## DDDが解決する課題

| 課題 | DDD による解決 |
|------|-------------|
| **認識のズレ** | ビジネス側と開発側が同じ言葉を使用 |
| **変更への脆弱性** | ドメイン知識がモデルに集約されている |
| **スケーラビリティ** | 大規模システムを独立したコンテキストで管理 |

## AI駆動開発との結合点

- **AIへの指示が明確になる**：ユビキタス言語により「注文の支払いを完了する」と具体的に指示可能
- **複数AIエージェント間の同期**：Bounded Contextで「Order」の意味を一意に定義することで、各エージェントが同じ仕様を共有
- **AI生成コードの品質向上**：ドメイン知識がモデルに明示されているため、AIが要件を正確に理解できる

DDDは、AI駆動開発でビジネスの複雑性をAIが理解・処理しやすくするための基盤です。
